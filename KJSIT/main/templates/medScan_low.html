{% extends "base_medpred.html" %}

{% load static %}

{% block title %}
MedPred | Test for diseases in the most effective way
{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'medpred/Header.css' %}">
<link rel="stylesheet" href="{% static 'medScan_low_css/index-35QkwXAN.css' %}">
<link rel="stylesheet" href="{% static 'medpred/Footer.css' %}">

<body style ="min-height:100vh; display:flex; flex-direction: column;">
    <!-- Navbar -->
    {% if user.is_authenticated %}
    {% include 'Header_medpred.html' %}
    <!-- Background image -->
    <div class="bg-[url('/static/bg_img2.jpg')] bg-cover min-h-screen flex justify-center items-center" id="bgimg">

        <form action="/medscan/result/" method="POST" id="myForm" class="flex flex-col md:flex-row justify-center items-center w-full md:w-4/5 lg:w-3/5 p-5">
            {% csrf_token %}
            <input type="hidden" id="symInput" name="symptoms" value="">

            <!-- Symptoms Selection Card -->
            <div class="w-full md:w-1/2 lg:w-1/3 rounded-xl backdrop-blur-xl h-5/6 p-6 mb-4 md:mb-0 md:mr-4 bg-opacity-50 bg-black">
                <div class="text-white">
                    <p class="text-3xl md:text-4xl lg:text-5xl mb-3">Select Symptoms</p>
                    <ul id="selecting" class="flex flex-wrap text-lg md:text-xl justify-left space-x-2 space-y-2">
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">itching</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">skin_rash</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">continuous_sneezing</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">shivering</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">chills</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">joint_pain</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">cough</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">vomiting</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">headache</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">chest_pain</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">breathlessness</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">nausea</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">diarrhoea</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">muscle_pain</button></li>
                        <li><button type="button" id="symp" class="bg-white text-black px-3 py-1 rounded">sweating</button></li>
                    </ul>
                    <button type="button" onclick="submitForm()" class="bg-white text-black text-lg font-bold mt-4 px-6 py-2 rounded-xl ">Submit</button>
                </div>
            </div>

            <!-- Selected Symptoms Card -->
            <div class="w-full md:w-1/2 lg:w-1/3 rounded-xl backdrop-blur-xl h-5/6 p-6 bg-opacity-50 bg-black">
                <div class="text-white">
                    <p class="text-3xl md:text-4xl lg:text-5xl mb-3">Selected Symptoms</p>
                    <ul id="selected" class="flex flex-wrap text-lg md:text-xl justify-left space-x-2 space-y-2">
                        <!-- Selected symptoms will appear here -->
                    </ul>
                </div>
            </div>
        </form>
    </div>

    <script>
        let sym = [];
        let selected = document.querySelector('#selected');
        let selecting = document.querySelector('#selecting');

        selecting.addEventListener("click", function(event) {
            if (event.target.tagName === 'BUTTON') {
                let adding = document.createElement('li');
                adding.innerText = event.target.innerText;
                adding.setAttribute('id', 'symp');
                selected.appendChild(adding);
                sym.push(event.target.innerText);
                event.target.remove();
            }
        });

        selected.addEventListener("click", function(event) {
            if (event.target.tagName === 'LI') {
                let adding = document.createElement('li');
                adding.innerText = event.target.innerText;
                adding.setAttribute('id', 'symp');
                for (let i = 0; i < sym.length; i++) {
                    if (sym[i] == adding.innerText) sym.splice(i, 1);
                }
                selecting.appendChild(adding);
                event.target.remove();
            }
        });

        function submitForm() {
            document.getElementById('symInput').value = JSON.stringify(sym);
            document.getElementById('myForm').submit();
        }
    </script>

    {% include 'Footer_medpred.html' %}
    {% else %}
    {% include 'error_message.html' %}
    {% endif %}
</body>

{% endblock content %}
